<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FNL STUDIO</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #0f172a, #1e293b);
      color: white;
      text-align: center;
      padding: 30px;
      margin: 0;
      position: relative;
    }
    .logo img { width: 200px; height: auto; margin-top: 10px; }
    .tagline { font-size: 20px; margin: 10px 0 30px; }
    #message { margin-top: 10px; font-weight: bold; }
    .preset-card { background-color: #111827; border-radius: 20px; padding: 10px; margin: 20px auto; width: 90%; max-width: 400px; display: flex; align-items: center; justify-content: space-between; }
    .preset-card img { border-radius: 12px; width: 100px; height: 100px; object-fit: cover; }
    .preset-info { flex: 1; text-align: left; margin-left: 15px; }
    .preset-info h3 { margin: 5px 0; }
    .preset-info p { margin: 5px 0; }
    .feedback-section { margin-top: 30px; }
    .feedback-card { background-color: #111827; border-radius: 10px; padding: 10px; margin: 10px auto; max-width: 400px; text-align: left; }
    .feedback-card .rating { color: #ffd700; }
    .read-more { margin-top: 20px; background-color: #ef4444; padding: 10px 20px; border: none; border-radius: 5px; color: white; cursor: pointer; }
    .about { margin-top: 50px; border-top: 1px solid #444; padding-top: 30px; font-size: 14px; color: #ccc; max-width: 800px; margin-left: auto; margin-right: auto; }
    .menu-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 24px;
      cursor: pointer;
      z-index: 1000;
    }
    .menu {
      position: fixed;
      top: 0;
      right: -50%;
      width: 50%;
      height: 100%;
      background-color: #1e293b;
      padding: 20px;
      transition: right 0.3s ease;
      z-index: 1000;
      box-shadow: -2px 0 5px rgba(0,0,0,0.5);
    }
    .menu.open { right: 0; }
    .menu input {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: none;
      background-color: #111827;
      color: white;
    }
    .menu button {
      background-color: #10b981;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      width: 100%;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="logo">
    <img src="https://i.postimg.cc/kX2rSgJw/20250414-095948.png" alt="FNL Studio Logo" />
  </div>
  <div class="tagline">Capturing Creativity</div>
  <div id="message"></div>
  <div id="presetList"></div>
  <div class="feedback-section">
    <h2>Customer Feedback</h2>
    <div id="feedbackList"></div>
    <button class="read-more" onclick="window.location.href='feedback.html'">Read More Feedback</button>
  </div>
  <div class="about">
    <h2>About Us</h2>
    <p>Welcome to FNL Studio – a creative collaboration between Light Editz and Flash Editz. We're passionate about visual storytelling and dedicated to providing high-quality, professional-grade presets for photo and video editors. Whether you're just starting out or you're a seasoned creator, our presets are crafted to give your content a unique, polished look with just a few clicks.</p>
    <br />
    <h3>© 2025 FNL Studio. All rights reserved.</h3>
    <p>All content on this website, including presets, visuals, and text, is the intellectual property of FNL Studio and is protected by copyright laws. Any unauthorized use, reproduction, or distribution of our materials is strictly prohibited.</p>
    <p>After buying a preset, follow the payment instructions on the payment page and DM us on Instagram @fnl_studio_ with proof!</p>
  </div>
  <div class="menu-toggle" onclick="toggleMenu()">☰</div>
  <div class="menu" id="sideMenu">
    <input type="text" id="searchBar" placeholder="Search Presets..." onkeyup="searchPresets()">
    <button onclick="window.location.href='adminlogin.html'">Collaborators</button>
  </div>

  <script>
    const BIN_ID = "67fccb0b8960c979a584b5d5";
    const MASTER_KEY = "$2a$10$PlYW4zt8k/Be46UjnPgRSex64CZn7Sk7ifMW09AgYaT1.jS2pwjnO";
    const API_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

    async function loadPresets() {
      try {
        const response = await fetch(API_URL + "/latest", {
          headers: { "X-Master-Key": MASTER_KEY }
        });
        if (!response.ok) throw new Error("Failed to fetch presets");
        const data = await response.json();
        const presets = data.record.presets || [];
        const container = document.getElementById("presetList");
        container.innerHTML = "";

        presets.forEach((preset) => {
          const card = document.createElement("div");
          card.className = "preset-card";
          card.innerHTML = `
            <img src="${preset.thumbnail}" alt="Thumbnail">
            <div class="preset-info">
              <h3>${preset.name}</h3>
              <p>Price: ₹${preset.price}</p>
              <a href="payment.html?price=${preset.price}">
                <button style="background-color: #10b981; margin-top: 5px;">Buy Now</button>
              </a>
            </div>
          `;
          container.appendChild(card);
        });
      } catch (error) {
        console.error("Error loading presets:", error);
        document.getElementById("message").textContent = "Failed to load presets.";
        document.getElementById("message").style.color = "red";
      }
    }

    async function loadFeedback() {
      try {
        const response = await fetch(API_URL + "/latest", {
          headers: { "X-Master-Key": MASTER_KEY }
        });
        if (!response.ok) throw new Error("Failed to fetch feedback");
        const data = await response.json();
        const feedbacks = data.record.feedbacks || [];
        const feedbackList = document.getElementById("feedbackList");
        feedbackList.innerHTML = "";
        feedbacks.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 3).forEach(feedback => {
          const card = document.createElement("div");
          card.className = "feedback-card";
          card.innerHTML = `
            <p><strong>${feedback.name}</strong> (${feedback.rating}⭐)</p>
            <p>${feedback.comment}</p>
          `;
          feedbackList.appendChild(card);
        });
      } catch (error) {
        console.error("Error loading feedback:", error);
      }
    }

    function toggleMenu() {
      const menu = document.getElementById("sideMenu");
      menu.classList.toggle("open");
    }

    function searchPresets() {
      const query = document.getElementById("searchBar").value.toLowerCase();
      const presets = document.getElementsByClassName("preset-card");
      for (let preset of presets) {
        const name = preset.getElementsByTagName("h3")[0].textContent.toLowerCase();
        preset.style.display = name.includes(query) ? "flex" : "none";
      }
    }

    window.onload = () => { loadPresets(); loadFeedback(); };
  </script>
</body>
</html>
