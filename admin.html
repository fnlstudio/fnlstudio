<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - FNL Studio</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: #e2e8f0;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .logo img {
      width: 200px;
      height: auto;
      margin-bottom: 30px;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    }
    h1 { font-size: 1.5em; margin: 15px 0; color: #f1f5f9; font-weight: 600; }
    .admin-section {
      background-color: #1e293b;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      max-width: 600px;
      width: 90%;
      text-align: left;
    }
    .admin-section button {
      background-color: #10b981;
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      color: white;
      cursor: pointer;
      font-weight: 600;
      margin: 10px 5px;
      transition: background-color 0.3s, transform 0.2s;
    }
    .admin-section button:hover { background-color: #059669; transform: translateY(-2px); }
    .presets-section {
      margin-top: 20px;
    }
    .preset-item {
      background-color: #2d3b4e;
      padding: 10px;
      border-radius: 10px;
      margin: 10px 0;
      text-align: left;
    }
    .preset-item button {
      background-color: #10b981;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      margin-right: 5px;
      transition: background-color 0.3s;
    }
    .preset-item button:hover { background-color: #059669; }
    .preset-item .delete-btn { background-color: #ef4444; }
    .preset-item .delete-btn:hover { background-color: #dc2626; }
    .details-section {
      margin-top: 20px;
      text-align: center;
    }
    .details-section div {
      background-color: #2d3b4e;
      padding: 10px;
      border-radius: 10px;
      margin: 10px 0;
    }
    .back-button {
      background-color: #4a5b6f;
      padding: 12px 30px;
      border: none;
      border-radius: 10px;
      color: #e2e8f0;
      cursor: pointer;
      font-weight: 600;
      margin-top: 20px;
      transition: background-color 0.3s, transform 0.2s;
    }
    .back-button:hover { background-color: #3a4b5f; transform: translateY(-2px); }
    .footer {
      margin-top: auto;
      padding: 20px;
      background-color: #0f172a;
      width: 100%;
      text-align: center;
      border-top: 1px solid #2d3b4e;
    }
    .error-message { color: #ef4444; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="logo">
    <img src="https://i.postimg.cc/kX2rSgJw/20250414-095948.png" alt="FNL Studio Logo" />
  </div>
  <h1>Admin Dashboard</h1>
  <div class="admin-section">
    <button onclick="window.location.href='upload.html'">Add Preset</button>
    <button onclick="viewLoginDetails()">Login Details</button>
    <button onclick="viewPaymentDetails()">Payment Details</button>
    <button onclick="manageFeedback()">Manage Feedback</button>
  </div>
  <div class="presets-section" id="presetsSection">
    <!-- Presets will be populated by JavaScript -->
  </div>
  <div class="details-section" id="detailsSection"></div>
  <button class="back-button" onclick="window.location.href='index.html'">Back</button>
  <div class="footer">
    <h3>About Us</h3>
    <p>Welcome to FNL Studio – a creative collaboration between Light Editz and Flash Editz. We're passionate about visual storytelling and dedicated to providing high-quality, professional-grade presets for photo and video editors. Whether you're just starting out or you're a seasoned creator, our presets are crafted to give your content a unique, polished look with just a few clicks.</p>
    <h3>Copyright ©</h3>
    <p>© 2025 FNL Studio. All rights reserved. All content on this website, including presets, visuals, and text, is the intellectual property of FNL Studio and is protected by copyright laws. Any unauthorized use, reproduction, or distribution of our materials is strictly prohibited.</p>
  </div>
  <div id="errorMessage" class="error-message"></div>

  <script>
    const BIN_ID = "67fccb0b8960c979a584b5d5";
    const MASTER_KEY = "$2a$10$PlYW4zt8k/Be46UjnPgRSex64CZn7Sk7ifMW09AgYaT1.jS2pwjnO";
    const API_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;
    const presetsSection = document.getElementById("presetsSection");
    const detailsSection = document.getElementById("detailsSection");

    async function loadPresets() {
      try {
        const response = await fetch(API_URL + "/latest", { headers: { "X-Master-Key": MASTER_KEY } });
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();
        const presets = data.record.presets || [];
        presetsSection.innerHTML = presets.map(preset => `
          <div class="preset-item">
            Name: ${preset.name}<br>
            Price: ₹${preset.price}<br>
            Download URL: ${preset.download_url}<br>
            Thumbnail URL: ${preset.thumbnail_url}<br>
            <button onclick="window.location.href='edit.html?preset=${encodeURIComponent(JSON.stringify(preset))}'">Edit</button>
            <button class="delete-btn" onclick="deletePreset('${preset.name}')">Delete</button>
          </div>
        `).join("") || "<p>No presets available.</p>";
      } catch (error) { console.error("Error loading presets:", error); }
    }

    async function deletePreset(name) {
      if (!confirm("Are you sure you want to delete this preset?")) return;
      try {
        const response = await fetch(API_URL + "/latest", { headers: { "X-Master-Key": MASTER_KEY } });
        const data = await response.json();
        const presets = data.record.presets.filter(p => p.name !== name);
        await fetch(API_URL, {
          method: "PUT",
          headers: { "X-Master-Key": MASTER_KEY, "Content-Type": "application/json" },
          body: JSON.stringify({ ...data.record, presets })
        });
        loadPresets();
      } catch (error) { console.error("Error deleting preset:", error); }
    }

    async function viewLoginDetails() {
      window.location.href = "logindetail.html";
    }

    async function viewPaymentDetails() {
      window.location.href = "paymentdetails.html";
    }

    async function manageFeedback() {
      window.location.href = "managefeedback.html";
    }

    window.onload = loadPresets;
  </script>
</body>
</html>
